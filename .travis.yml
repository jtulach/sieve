language: java
sudo: false
dist: xenial
services:
  - xvfb
before_script:
  - export DISPLAY=:99.0
  - mkdir -p download
  - cd download
  - wget https://github.com/graalvm/graalvm-ce-builds/releases/download/vm-19.3.1/graalvm-ce-java8-linux-amd64-19.3.1.tar.gz
  - cd ..
  - tar fxvz download/graalvm-ce-java8-linux-amd64-19.3.1.tar.gz
  - ./graalvm-ce-*/bin/gu install -c org.graalvm.ruby
  - ./graalvm-ce-*/bin/gu install -c org.graalvm.R
  - ./graalvm-ce-*/bin/gu install -c org.graalvm.python
script:
  - set -eo pipefail
  - ./.test.sh ./graalvm-ce-*/ 2>&1 | grep -v ^Computed.*Last.*one
os:
- linux